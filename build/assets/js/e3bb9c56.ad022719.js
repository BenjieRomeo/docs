(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{155:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return O})),n.d(t,"metadata",(function(){return g})),n.d(t,"toc",(function(){return f})),n.d(t,"default",(function(){return N}));var a=n(3),i=n(7),o=n(0),r=n.n(o),l=n(156),s=n(208),c=n(158),b=n(143),d=n.n(b);const p=37,u=39;var m=function(e){const{lazy:t,block:n,defaultValue:a,values:i,groupId:l,className:b}=e,{tabGroupChoices:m,setTabGroupChoices:h}=Object(s.a)(),[O,g]=Object(o.useState)(a),f=o.Children.toArray(e.children),j=[];if(null!=l){const e=m[l];null!=e&&e!==O&&i.some((t=>t.value===e))&&g(e)}const N=e=>{const t=e.currentTarget,n=j.indexOf(t),a=i[n].value;g(a),null!=l&&(h(l,a),setTimeout((()=>{(function(e){const{top:t,left:n,bottom:a,right:i}=e.getBoundingClientRect(),{innerHeight:o,innerWidth:r}=window;return t>=0&&i<=r&&a<=o&&n>=0})(t)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(d.a.tabItemActive),setTimeout((()=>t.classList.remove(d.a.tabItemActive)),2e3))}),150))},_=e=>{var t;let n;switch(e.keyCode){case u:{const t=j.indexOf(e.target)+1;n=j[t]||j[0];break}case p:{const t=j.indexOf(e.target)-1;n=j[t]||j[j.length-1];break}}null===(t=n)||void 0===t||t.focus()};return r.a.createElement("div",{className:"tabs-container"},r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(c.a)("tabs",{"tabs--block":n},b)},i.map((({value:e,label:t})=>r.a.createElement("li",{role:"tab",tabIndex:O===e?0:-1,"aria-selected":O===e,className:Object(c.a)("tabs__item",d.a.tabItem,{"tabs__item--active":O===e}),key:e,ref:e=>j.push(e),onKeyDown:_,onFocus:N,onClick:N},t)))),t?Object(o.cloneElement)(f.filter((e=>e.props.value===O))[0],{className:"margin-vert--md"}):r.a.createElement("div",{className:"margin-vert--md"},f.map(((e,t)=>Object(o.cloneElement)(e,{key:t,hidden:e.props.value!==O})))))};var h=function({children:e,hidden:t,className:n}){return r.a.createElement("div",{role:"tabpanel",hidden:t,className:n},e)},O={title:"Tutorial"},g={unversionedId:"libzt-c/tutorial.html",id:"libzt-c/tutorial.html",isDocsHomePage:!1,title:"Tutorial",description:"Programmatically join, create, and administer secure, globally-available virtual private networks of unlimited size.",source:"@site/docs/libzt-c/tutorial.html.md",sourceDirName:"libzt-c",slug:"/libzt-c/tutorial.html",permalink:"/libzt-c/tutorial.html",editUrl:"https://github.com/zerotier/docs/docs/libzt-c/tutorial.html.md",version:"current",frontMatter:{title:"Tutorial"},sidebar:"docsSidebar",previous:{title:"ZeroTier SDK Core",permalink:"/libzt-c/zerotier-sdk"},next:{title:"ZeroTierOne.h",permalink:"/autogen/libztcore/files/_zero_tier_one_8h"}},f=[{value:"Initializing a node",id:"initializing-a-node",children:[]},{value:"Additional initialization options",id:"additional-initialization-options",children:[]},{value:"Starting a node",id:"starting-a-node",children:[]},{value:"No storage option",id:"no-storage-option",children:[]},{value:"Getting information about your node",id:"getting-information-about-your-node",children:[]},{value:"Stopping a node",id:"stopping-a-node",children:[]},{value:"Generating an API token",id:"generating-an-api-token",children:[]},{value:"Creating a network",id:"creating-a-network",children:[]},{value:"Authorizing a node",id:"authorizing-a-node",children:[]},{value:"Changing network settings",id:"changing-network-settings",children:[]},{value:"Node Events",id:"node-events",children:[]},{value:"Network Events",id:"network-events",children:[]},{value:"Peer Events",id:"peer-events",children:[]},{value:"Address Events",id:"address-events",children:[]},{value:"Get All Kittens",id:"get-all-kittens",children:[{value:"HTTP Request",id:"http-request",children:[]},{value:"Query Parameters",id:"query-parameters",children:[]}]},{value:"Get a Specific Kitten",id:"get-a-specific-kitten",children:[{value:"HTTP Request",id:"http-request-1",children:[]},{value:"URL Parameters",id:"url-parameters",children:[]}]},{value:"Delete a Specific Kitten",id:"delete-a-specific-kitten",children:[{value:"HTTP Request",id:"http-request-2",children:[]},{value:"URL Parameters",id:"url-parameters-1",children:[]}]}],j={toc:f};function N(e){var t=e.components,n=Object(i.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},j,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h1",{id:"getting-started"},"Getting Started"),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Programmatically join, create, and administer secure, globally-available virtual private networks of unlimited size.")),Object(l.b)("p",null,"This is a multi-part tutorial on how to use the ZeroTier SDK. It generally progresses from beginner topics to advanced topics and is meant to be read linearly. For the purposes of this tutorial it is recommended that you first ",Object(l.b)("a",{parentName:"p",href:"https://my.zerotier.com"},"create an account")," and a private network to test on, but it is not strictly necessary if you're comfortable joining public networks."),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"tl;dr")),Object(l.b)(m,{defaultValue:"c",groupId:"language-examples",values:[{label:"C",value:"c"},{label:"Python",value:"python"}],mdxType:"Tabs"},Object(l.b)(h,{value:"c",mdxType:"TabItem"},Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"#include <ZeroTierSockets.h>\n\nint main() {\n  zts_node_start();\n  zts_net_join(0x1234567890abcdef);\n  // ...\n  int s = zts_socket(ZTS_AF_INET, ZTS_SOCK_STREAM, 0);\n  zts_connect(s, in4, adddrlen);\n  // ...\n  return zts_node_stop();\n}\n"))),Object(l.b)(h,{value:"python",mdxType:"TabItem"},Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-python"},'\n  import libzt\n\n  print("Starting ZeroTier...")\n  event_callback = MyEventCallbackClass()\n  libzt.start(key_file_path, event_callback, zt_service_port)\n  print("Waiting for node to come online...")\n  while not is_online:\n      time.sleep(1)\n  print("Joining network:", hex(network_id))\n  libzt.join(network_id)\n  while not is_joined:\n      time.sleep(1)\n  print("Joined network")\n')))),Object(l.b)("aside",{class:"success"},"Full example source code: ",Object(l.b)("a",{href:"https://github.com/zerotier/libzt/tree/master/examples"},"libzt/examples")),Object(l.b)("p",null,"For API reference documentation see the following:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"C/C++ (Doxygen)"),Object(l.b)("li",{parentName:"ul"},"C# (Doxygen)"),Object(l.b)("li",{parentName:"ul"},"Java (javadoc)"),Object(l.b)("li",{parentName:"ul"},"Python (pydoc)")),Object(l.b)("h1",{id:"part-1-ping-able-node"},"Part 1. Ping-able Node"),Object(l.b)("p",null,"In this part we will initialize a node, start it and join our public ",Object(l.b)("inlineCode",{parentName:"p"},"earth")," network. Once joined you can also join a desktop client and ping your new globally static IPv4 (or IPv6) address."),Object(l.b)("aside",{class:"warning"},"Security note: Since ",Object(l.b)("code",null,"earth")," is a public network it is recommended that you create an account and a private network of your own to test on."),Object(l.b)("h2",{id:"initializing-a-node"},"Initializing a node"),Object(l.b)("p",null,"Before you start a node you should consider the following initialization options."),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"zts_init_*")," functions should be called before starting your node. They don't do much except instruct your node how to operate after you call ",Object(l.b)("inlineCode",{parentName:"p"},"zts_node_start()"),". Every node needs an ",Object(l.b)("inlineCode",{parentName:"p"},"identity"),". You have a few options:"),Object(l.b)("p",null,"Generate a new one:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_init_new_identity()\n")),Object(l.b)("p",null,"Load from storage (will generate new identity if path is empty or does not exist):"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},'zts_init_from_storage("./node_path")\n')),Object(l.b)("p",null,"Load from memory:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_init_from_memory(key, len)\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"An identity is a verifiable address that networks and other nodes can use to talk to your node at a low level.")),Object(l.b)("h2",{id:"additional-initialization-options"},"Additional initialization options"),Object(l.b)("p",null,"There are a few other initialization functions to customize the behavior of your node which must be called before ",Object(l.b)("inlineCode",{parentName:"p"},"zts_node_start()"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_init_port(int port); // Bind to specific port\nzts_init_callback(&my_event_handler); // Set callback function\nzts_start();\n...\n")),Object(l.b)("h2",{id:"starting-a-node"},"Starting a node"),Object(l.b)("p",null,"A ZeroTier node needs an ",Object(l.b)("inlineCode",{parentName:"p"},"identity"),". . When you start a node for the first time it will generate a new identity automatically. That is, unless you told it where to find an identity that you already have. We'll get to that in a moment."),Object(l.b)("p",null,"Here's a minimal pingable IPv4 program:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},'zts_init_from_storage("./node_identity_files");\nzts_node_start();\n')),Object(l.b)("p",null,"This method will first check the directory for an identity file:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"If it is found it will load it and use that identity."),Object(l.b)("li",{parentName:"ul"},"If the directory is empty the node will generate a new identity and write it to files ",Object(l.b)("inlineCode",{parentName:"li"},"identity.secret")," and ",Object(l.b)("inlineCode",{parentName:"li"},"identity.public"),"."),Object(l.b)("li",{parentName:"ul"},"Will automatically take care of all peer, network and planet caching.")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"You should keep your identity files safe and unique! If anyone gets ahold of these files they can impersonate your node. And if you run two nodes with the same identities you will have a bad day.")),Object(l.b)("h2",{id:"no-storage-option"},"No storage option"),Object(l.b)("p",null,"If instead you have an identity in memory that you'd like to use, you can do the following:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_init_from_memory(identity, len);\nzts_node_start();\n")),Object(l.b)("p",null,"If you use the above option, nothing will be read from or written to storage. If you are interested in caching things like peer connectivity hints, network config, etc., you will need to do that manually via the callback system discussed later."),Object(l.b)("h2",{id:"getting-information-about-your-node"},"Getting information about your node"),Object(l.b)("p",null,"After your node is"),Object(l.b)("h2",{id:"stopping-a-node"},"Stopping a node"),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"If you're done using ZeroTier and want to stop the node, call:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_node_stop();\n")),Object(l.b)("p",null,"It is possible re-start the node just by calling ",Object(l.b)("inlineCode",{parentName:"p"},"zts_node_start()"),". No re-initialization is necessary."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_node_restart();\n")),Object(l.b)("p",null,"If however you are absolutely certain you are done and want all threads to cease operation and for resources to be completely freed, call:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_node_free();\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"tl;dr")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},'#include <stdio.h>\n#include "ZeroTierSockets.h"\n\nint main() {\n    printf("Starting node...\\n");\n    zts_node_start();\n\n    printf("Waiting for node to come online\\n");\n    while (!zts_node_is_online())\n        zts_delay_ms(50);\n\n    printf("Node identity is: %llx\\n", zts_node_get_id());\n\n    printf("Joining network\\n");\n    uint64_t network = 0x8286ac0e47a6f241;\n    zts_net_join(network);\n\n    printf("Waiting for join to complete. Did you authorize it?\\n");\n    while (zts_net_count() < 1)\n        zts_delay_ms(50);\n\n    printf("Waiting for address assignment\\n");\n    int err = 0;\n    while (! (err = zts_addr_is_assigned(network, ZTS_AF_INET))) {\n        printf("err = %d\\n", err);\n        zts_delay_ms(500);\n    }\n    char ipstr[ZTS_INET6_ADDRSTRLEN] = { 0 };\n    zts_addr_get_str(network, ZTS_AF_INET, ipstr, ZTS_INET6_ADDRSTRLEN);\n    printf("Ping me at %s\\n", ipstr);\n\n    // Do network stuff!\n\n    zts_delay_ms(120000);\n\n    printf("Stopping node\\n");\n    return zts_node_stop();\n}\n')),Object(l.b)("p",null,"Program output"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"Starting node...\nWaiting for node to come online\nNode identity is: 123456abcd\nJoining network\nWaiting for join to complete. Did you authorize it?\nWaiting for address assignment\nPing me at 172.22.22.1\nStopping node\n")),Object(l.b)("h1",{id:"part-2-sockets"},"Part 2. Sockets"),Object(l.b)("p",null,"ZeroTier provides a socket interface that idiomatic to each supported language."),Object(l.b)("h1",{id:"part-3-central-api"},"Part 3. Central API"),Object(l.b)("p",null,"This section will show you how to use the built-in Central API to make calls to our hosted endpoints using your language of choice. It is not necessary to use these built in features but they are provided as a convenience."),Object(l.b)("aside",{class:"notice"},"The Central client functionality built into libzt is a lagging subset of what is available at ",Object(l.b)("a",{href:"https://apidocs.zerotier.com/"},"apidocs.zerotier.com"),". That being said, it should provide for most of your needs."),Object(l.b)("h2",{id:"generating-an-api-token"},"Generating an API token"),Object(l.b)("h2",{id:"creating-a-network"},"Creating a network"),Object(l.b)("h2",{id:"authorizing-a-node"},"Authorizing a node"),Object(l.b)("h2",{id:"changing-network-settings"},"Changing network settings"),Object(l.b)("h1",{id:"starting-zerotier"},"Starting ZeroTier"),Object(l.b)("p",null,"The next few sections explain how to use the network control interface portion of the API. These functions are non-blocking and will return an error code specified in the ",Object(l.b)("a",{parentName:"p",href:"#error-handling"},"Error Handling")," section and will result in the generation of callback events detailed in the ",Object(l.b)("a",{parentName:"p",href:"#event-handling"},"Event Handling")," section. It is your responsibility to handle these events."),Object(l.b)("p",null,"To start the service, simply call:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_start(const char *path, void (*callback)(void *), uint16_t port);\nzts_callback_msg*), int port)`\n")),Object(l.b)("p",null,"At this stage, if a cryptographic identity for this node does not already exist on your local storage medium, it will generate a new one and store it, the node's address (commonly referred to as ",Object(l.b)("inlineCode",{parentName:"p"},"nodeId"),") will be derived from this identity and will be presented to you upon receiving the ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_ONLINE")," shown below. The first argument ",Object(l.b)("inlineCode",{parentName:"p"},"path")," is a path where you will direct ZeroTier to store its automatically-generated cryptographic identity files (",Object(l.b)("inlineCode",{parentName:"p"},"identity.public")," and ",Object(l.b)("inlineCode",{parentName:"p"},"identity.secret"),"), these files are your keys to communicating on the network. Keep them safe and keep them unique. If any two nodes are online using the same identities you will have a bad time. The second argument ",Object(l.b)("inlineCode",{parentName:"p"},"userCallbackFunc")," is a function that you specify to handle all generated events for the life of your program, see below:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},'#include "ZeroTierSockets.h"\n\n...\n\nbool networkReady = false;\n\nvoid on_zts_event(struct zts_callback_msg *msg)\n{\n    if (msg->eventCode == ZTS_EVENT_NODE_ONLINE) {\n        printf("ZTS_EVENT_NODE_ONLINE, nodeId=%llx\\n", msg->node->address);\n        networkReady = true;\n    }\n    ...\n}\n\nint main()\n{\n    zts_start("configPath", &on_zts_event, 9994);\n    uint64_t nwid = 0x0123456789abcdef;\n    while (!networkReady) { sleep(1); }\n    zts_join(nwid);\n    int fd = zts_socket(ZTS_AF_INET, ZTS_SOCK_STREAM, 0);\n    ...\n    return 0;\n}\n\n')),Object(l.b)("p",null,"For more complete examples see ",Object(l.b)("inlineCode",{parentName:"p"},"./examples/")),Object(l.b)("p",null,"After calling ",Object(l.b)("inlineCode",{parentName:"p"},"zts_start()")," you will receive one or more events specified in the ",Object(l.b)("a",{parentName:"p",href:"#node-events"},"Node Events")," section. After receiving ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_ONLINE")," you will be allowed to join or leave networks. You must authorize the node ID provided by the this callback event to join your network. This can be done manually or via our ",Object(l.b)("a",{parentName:"p",href:"https://my.zerotier.com/help/api"},"Web API"),". Note however that if you are using an Ad-hoc network, it has no controller and therefore requires no authorization."),Object(l.b)("p",null,"At the end of your program or when no more network activity is anticipated, the user application can shut down the service with ",Object(l.b)("inlineCode",{parentName:"p"},"zts_stop()"),". However, it is safe to leave the service running in the background indefinitely as it doesn't consume much memory or CPU while at idle. ",Object(l.b)("inlineCode",{parentName:"p"},"zts_stop()")," is a non-blocking call and will itself issue a series of events indicating that various aspects of the ZeroTier service have successfully shut down."),Object(l.b)("p",null,"It is worth noting that while ",Object(l.b)("inlineCode",{parentName:"p"},"zts_stop()")," will stop the service, the user-space network stack will continue operating in a headless hibernation mode. This is intended behavior due to the fact that the network stack we've chosen doesn't currently support the notion of shutdown since it was initially designed for embedded applications that are simply switched off. If you do need a way to shut everything down and free all resources you can call ",Object(l.b)("inlineCode",{parentName:"p"},"zts_free()"),", but please note that calling this function will prevent all subsequent ",Object(l.b)("inlineCode",{parentName:"p"},"zts_start()")," calls from succeeding and will require a full application restart if you want to run the service again. The events ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_ONLINE")," and ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_OFFLINE")," can be seen periodically throughout the lifetime of your application depending on the reliability of your underlying network link, these events are lagging indicators and are typically only triggered every thirty (30) seconds."),Object(l.b)("p",null,"Lastly, the function ",Object(l.b)("inlineCode",{parentName:"p"},"zts_restart()")," is provided as a way to restart the ZeroTier service along with all of its virtual interfaces. The network stack will remain online and undisturbed during this call. Note that this call will temporarily block until the service has fully shut down, then will return and you may then watch for the appropriate startup callbacks mentioned above."),Object(l.b)("h1",{id:"joining-a-network"},"Joining a network"),Object(l.b)("p",null,"Joining a ZeroTier virtual network is as easy as calling ",Object(l.b)("inlineCode",{parentName:"p"},"zts_join(uint64_t networkId)"),". Similarly there is a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_leave(uint64_t networkId)"),". Note that ",Object(l.b)("inlineCode",{parentName:"p"},"zts_start()")," must be called and a ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_ONLINE")," event must have been received before these calls will succeed. After calling ",Object(l.b)("inlineCode",{parentName:"p"},"zts_join()")," any one of the events detailed in the ",Object(l.b)("a",{parentName:"p",href:"#network-events"},"Network Events")," section may be generated."),Object(l.b)("h1",{id:"connecting-to-peers"},"Connecting to peers"),Object(l.b)("p",null,"Creating a standard socket connection generally works the same as it would using an ordinary socket interface, however with ZeroTier there is a subtle difference in how connections are established which may cause confusion. Since ZeroTier employs transport-triggered link provisioning a direct connection between peers will not exist until contact has been attempted by at least one peer. During this time before a direct link is available traffic will be handled via our free relay service. The provisioning of this direct link usually only takes a couple of seconds but it is important to understand that if you attempt something like s ",Object(l.b)("inlineCode",{parentName:"p"},"zts_connect(...)")," call during this time it may fail due to packet loss. Therefore it is advised to repeatedly call ",Object(l.b)("inlineCode",{parentName:"p"},"zts_connect(...)")," until it succeeds and to wait to send additional traffic until ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_PEER_DIRECT")," has been received for the peer you are attempting to communicate with. All of the above is optional, but it will improve your experience."),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"tl;dr: Try a few times and wait a few seconds")),Object(l.b)("p",null,"As a mitigation for the above behavior, ZeroTier will by default cache details about how to contact a peer in the ",Object(l.b)("inlineCode",{parentName:"p"},"peers.d")," subdirectory of the config path you passed to ",Object(l.b)("inlineCode",{parentName:"p"},"zts_start(...)"),". In scenarios where paths do not often change, this can almost completely eliminate the issue and will make connections nearly instantaneous. If however you do not wish to cache these details you can disable it via ",Object(l.b)("inlineCode",{parentName:"p"},"zts_set_peer_caching(false)"),"."),Object(l.b)("h1",{id:"event-handling"},"Event handling"),Object(l.b)("p",null,"As mentioned in previous sections, the control API works by use of non-blocking calls and the generation of a few dozen different event types. Depending on the type of event there may be additional contextual information attached to the ",Object(l.b)("inlineCode",{parentName:"p"},"zts_callback_msg")," object that you can use. This contextual information will be housed in one of the following structures which are defined in ",Object(l.b)("inlineCode",{parentName:"p"},"include/ZeroTierSockets.h"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"struct zts_callback_msg\n{\n    int eventCode;\n    struct zts_node_details *node;\n    struct zts_network_details *network;\n    struct zts_netif_details *netif;\n    struct zts_virtual_network_route *route;\n    struct zts_peer_details *peer;\n    struct zts_addr_details *addr;\n};\n")),Object(l.b)("p",null,"Here's an example of a callback function:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},'void on_zts_event(struct zts_callback_msg *msg)\n{\n    if (msg->eventCode == ZTS_EVENT_NODE_ONLINE) {\n        printf("ZTS_EVENT_NODE_ONLINE, node=%llx\\n", msg->node->address);\n        // You can join networks now!\n    }\n}\n')),Object(l.b)("p",null,"In this callback function you can perform additional non-blocking API calls or other work. While not returning control to the service isn't forbidden (the event messages are generated by a separate thread) it is recommended that you return control as soon as possible as not returning will prevent the user application from receiving additional callback event messages which may be time-sensitive."),Object(l.b)("p",null,"A typical ordering of messages may look like the following:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"...\nZTS_EVENT_NODE_ONLINE       // Your node is ready to be used.\nZTS_EVENT_ADDR_ADDED_IP4    // Your node received an IP address assignment on a given network.\nZTS_EVENT_NETWORK_UPDATE    // Something about a network changed.\nZTS_EVENT_NETWORK_READY_IP4 // Your node has joined a network, has an address, and can send/receive traffic.\nZTS_EVENT_PEER_RELAY        // A peer was discovered but no direct path exists (yet.)\n...\nZTS_EVENT_PEER_DIRECT       // One or more direct paths to a peer were discovered.\n")),Object(l.b)("h2",{id:"node-events"},"Node Events"),Object(l.b)("p",null,"Accessible via ",Object(l.b)("inlineCode",{parentName:"p"},"msg->node")," as a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_node_details")," object, this message type will contain information about the status of your node. ",Object(l.b)("em",{parentName:"p"},"Possible values of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->eventCode"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"ZTS_EVENT_NODE_OFFLINE             // Your node is offline.\nZTS_EVENT_NODE_ONLINE              // Your node is online and ready to communicate!\nZTS_EVENT_NODE_DOWN                // The node is down (for any reason.)\nZTS_EVENT_NODE_IDENTITY_COLLISION  // There is another node with the same identity causing a conflict.\nZTS_EVENT_NODE_UNRECOVERABLE_ERROR // Something went wrong internally.\nZTS_EVENT_NODE_NORMAL_TERMINATION  // Your node has terminated.\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Example contents of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->node"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"id            : f746d550dd\nversion       : 1.4.6\nprimaryPort   : 9995\nsecondaryPort : 0\n")),Object(l.b)("h2",{id:"network-events"},"Network Events"),Object(l.b)("p",null,"Accessible via ",Object(l.b)("inlineCode",{parentName:"p"},"msg->network")," as a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_network_details")," object, this message type will contain information about the status of a particular network your node has joined. ",Object(l.b)("em",{parentName:"p"},"Possible values of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->eventCode"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"ZTS_EVENT_NETWORK_NOT_FOUND      // The network does not exist. The provided networkID may be incorrect.\nZTS_EVENT_NETWORK_CLIENT_TOO_OLD // This client is too old.\nZTS_EVENT_NETWORK_REQ_CONFIG     // Waiting for network config, this might take a few seconds.\nZTS_EVENT_NETWORK_OK             // Node successfully joined.\nZTS_EVENT_NETWORK_ACCESS_DENIED  // The network is private. Your node requires authorization.\nZTS_EVENT_NETWORK_READY_IP4      // Your node successfully received an IPv4 address.\nZTS_EVENT_NETWORK_READY_IP6      // Your node successfully received an IPv6 address.\nZTS_EVENT_NETWORK_DOWN           // For some reason the network is no longer available.\nZTS_EVENT_NETWORK_UPDATE         // The network's config has changed: mtu, name, managed route, etc.\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Example contents of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->network"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"nwid                       : 8bd712bf36bdae5f\nmac                        : ae53fa031fcf\nname                       : cranky_hayes\ntype                       : 0\nmtu                        : 2800\ndhcp                       : 0\nbridge                     : 0\nbroadcastEnabled           : 1\nportError                  : 0\nnetconfRevision            : 34\nrouteCount                 : 1\nmulticastSubscriptionCount : 1\n- mac=ffffffffffff, adi=ac1b2561\naddresses:\n- FC5D:69B6:E0F7:46D5:50DD::1\n- 172.27.37.97\nroutes:\n- target : 172.27.0.0\n- via    : 0.0.0.0\n  - flags  : 0\n  - metric : 0\n")),Object(l.b)("h2",{id:"peer-events"},"Peer Events"),Object(l.b)("p",null,"Accessible via ",Object(l.b)("inlineCode",{parentName:"p"},"msg->peer")," as a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_peer_details")," object, this message type will contain information about a peer that was discovered by your node. These events are triggered when the reachability status of a peer has changed. ",Object(l.b)("em",{parentName:"p"},"Possible values of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->eventCode"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"ZTS_EVENT_PEER_DIRECT          // At least one direct path to this peer is known.\nZTS_EVENT_PEER_RELAY           // No direct path to this peer is known. It will be relayed, (high packet loss and jitter.)\nZTS_EVENT_PEER_UNREACHABLE     // Peer is not reachable by any means.\nZTS_EVENT_PEER_PATH_DISCOVERED // A new direct path to this peer has been discovered.\nZTS_EVENT_PEER_PATH_DEAD       // A direct path to this peer has expired.\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Example contents of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->peer"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"peer      : a747d5502d\nrole      : 0\nlatency   : 4\nversion   : 1.4.6\npathCount : 2\n - 172.27.37.97\n - F75D:69B6:E0C7:47D5:51DB::1\n")),Object(l.b)("h2",{id:"address-events"},"Address Events"),Object(l.b)("p",null,"Accessible via ",Object(l.b)("inlineCode",{parentName:"p"},"msg->addr")," as a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_addr_details")," object, this message type will contain information about addresses assign to your node on a particular network. The information contained in these events is also available via ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NETWORK_UPDATE")," events. ",Object(l.b)("em",{parentName:"p"},"Possible values of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->eventCode"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"ZTS_EVENT_ADDR_ADDED_IP4   // A new IPv4 address was assigned to your node on the indicated network.\nZTS_EVENT_ADDR_REMOVED_IP4 // An IPv4 address assignment to your node was removed on the indicated network.\nZTS_EVENT_ADDR_ADDED_IP6   // A new IPv6 address was assigned to your node on the indicated network.\nZTS_EVENT_ADDR_REMOVED_IP6 // An IPv6 address assignment to your node was removed on the indicated network.\n")),Object(l.b)("p",null,Object(l.b)("em",{parentName:"p"},"Example contents of ",Object(l.b)("inlineCode",{parentName:"em"},"msg->addr"),":")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"nwid : a747d5502d\naddr : 172.27.37.97\n")),Object(l.b)("h1",{id:"error-handling"},"Error handling"),Object(l.b)("p",null,"Calling a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_*")," function will result in one of the following return codes. Additionally, ",Object(l.b)("inlineCode",{parentName:"p"},"zts_errno")," will be set after each socket call. Its values closely mirror those used in standard socket interfaces and are defined in include/ZeroTierSockets.h"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"enum ZTS_Error {\n  ZTS_ERR_OK        =  0, // No error\n  ZTS_ERR_SOCKET    = -1, // Socket error, see zts_errno\n  ZTS_ERR_SERVICE   = -2, // The node service experienced a problem\n  ZTS_ERR_ARG       = -3, // Invalid argument\n  ZTS_ERR_NO_RESULT = -4, // No result (not necessarily an error)\n  ZTS_ERR_GENERAL   = -5  // Consider filing a bug report\n};\n")),Object(l.b)("aside",{class:"notice"},"For Android/Java (or similar) which use JNI, the socket API's error codes are negative values encoded in the return values of function calls."),Object(l.b)("aside",{class:"notice"},"For protocol-level errors (such as dropped packets) or internal network stack errors, see the section `Statistics`"),Object(l.b)("h1",{id:"common-pitfalls"},"Common pitfalls"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"If you have started a node but have not received a ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_ONLINE"),":"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"You may need to view our ",Object(l.b)("a",{parentName:"li",href:"https://zerotier.atlassian.net/wiki/spaces/SD/pages/6815768/Router+Configuration+Tips"},"Router Config Tips")," knowledge base article. Sometimes this is due to firewall/NAT settings."))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"If you have received a ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NODE_ONLINE")," event and attempted to join a network but do not see your node ID in the network panel on ",Object(l.b)("a",{parentName:"p",href:"my.zerotier.com"},"my.zerotier.com")," after some time:"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"You may have typed in your network ID incorrectly."),Object(l.b)("li",{parentName:"ul"},"Used an improper integer representation for your network ID (e.g. ",Object(l.b)("inlineCode",{parentName:"li"},"int")," instead of ",Object(l.b)("inlineCode",{parentName:"li"},"uint64_t"),")."))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"If you are unable to reliably connect to peers:"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"You should first read the section on ",Object(l.b)("a",{parentName:"li",href:"#connecting-and-communicating-with-peers"},"Connecting and communicating with peers"),"."),Object(l.b)("li",{parentName:"ul"},"If the previous step doesn't help move onto our knowledge base article ",Object(l.b)("a",{parentName:"li",href:"https://zerotier.atlassian.net/wiki/spaces/SD/pages/6815768/Router+Configuration+Tips"},"Router Config Tips"),". Sometimes this can be a transport-triggered link issue, and sometimes it can be a firewall/NAT issue."))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"API calls seem to fail in nonsensical ways and you're tearing your hair out:"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Be sure to read and understand the ",Object(l.b)("a",{parentName:"li",href:"#api-compatibility-with-host-os"},"API compatibility with host OS")," section."),Object(l.b)("li",{parentName:"ul"},"See the ",Object(l.b)("a",{parentName:"li",href:"#debugging"},"Debugging")," section for more advice."))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"Since libzt re-implements a socket interface likely very similar to your host OS's own interface it may be tempting to mix and match host OS structures and functions with those of libzt. This may work on occasion, but you are tempting fate. Here are a few important guidelines:"))),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"If you are calling a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_*")," function, use the appropriate ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_*")," constants:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"zts_socket(ZTS_AF_INET6, ZTS_SOCK_DGRAM, 0); // CORRECT\nzts_socket(AF_INET6, SOCK_DGRAM, 0);         // INCORRECT\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"If you are calling a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_*")," function, use the appropriate ",Object(l.b)("inlineCode",{parentName:"p"},"zts_*")," structure:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"struct zts_sockaddr_in in4;  // Note the zts_ prefix\nzts_bind(fd, (struct sockaddr *)&in4, sizeof(struct zts_sockaddr_in)) < 0);\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"If you are calling a host OS function, use your host OS's constants (and structures!):")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"inet_ntop(AF_INET6, &(in6->sin6_addr), ...);         // CORRECT\ninet_ntop(ZTS_AF_INET6, &(in6->sin6_addr), ...);     // INCORRECT\nzts_inet_ntop(ZTS_AF_INET6, &(in6->sin6_addr), ...); // CORRECT\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"If you are calling a host OS function but passing a ",Object(l.b)("inlineCode",{parentName:"p"},"zts_*")," structure, this can work sometimes but you should take care to pass the correct host OS constants:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},"struct zts_sockaddr_in6 in6;\n    ...\ninet_ntop(AF_INET6, &(in6->sin6_addr), dstStr, INET6_ADDRSTRLEN);\n")),Object(l.b)("h1",{id:"thread-model"},"Thread model"),Object(l.b)("p",null,"Both the ",Object(l.b)("strong",{parentName:"p"},"socket")," and ",Object(l.b)("strong",{parentName:"p"},"control")," interfaces are thread-safe but are implemented differently. The socket interface is implemented using a relatively performant core locking mechanism in lwIP. This can be disabled if you know what you're doing. The control interface is implemented by a single coarse-grained lock. This lock is not a performance bottleneck since it only applies to functions that manipulate the ZeroTier service and are called seldomly. Callback events are generated by a separate thread and are independent from the rest of the API's internal locking mechanism. Not returning from a callback event won't impact the rest of the API but it will prevent your application from receiving future events so it is in your application's best interest to perform as little work as possible in the callback function and promptly return control back to ZeroTier."),Object(l.b)("aside",{class:"notice"},"Internally, `libzt` will spawn a number of threads for various purposes: a thread for the core service, a thread for the network stack, a low priority thread to process callback events, and a thread for each network joined. The vast majority of work is performed by the core service and stack threads."),Object(l.b)("h1",{id:"debugging"},"Debugging"),Object(l.b)("p",null,"If you're experiencing odd behavior or something that looks like a bug I would suggest first reading and understanding the following sections:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"#common-pitfalls"},"Common pitfalls")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"#api-compatibility-with-host-os"},"API compatibility with host OS")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("a",{parentName:"li",href:"#thread-model"},"Thread model"))),Object(l.b)("p",null,"If the information in those sections hasn't helped, there are a couple of ways to get debug traces out of various parts of the library."),Object(l.b)("p",null,"1) Build the library in debug mode with ",Object(l.b)("inlineCode",{parentName:"p"},"make host_debug"),". This will prevent the stripping of debug symbols from the library and will enable basic output traces from libzt."),Object(l.b)("p",null,"2) If you believe your problem is in the network stack you can manually enable debug traces for individual modules in src/lwipopts.h. Toggle the ",Object(l.b)("inlineCode",{parentName:"p"},"*_DEBUG")," types from ",Object(l.b)("inlineCode",{parentName:"p"},"LWIP_DBG_OFF")," to ",Object(l.b)("inlineCode",{parentName:"p"},"LWIP_DBG_ON"),". And then rebuild. This will come with a significant performance cost."),Object(l.b)("p",null,"3) Enabling network stack statistics. This is useful if you want to monitor the stack's receipt and handling of traffic as well as internal things like memory allocations and cache hits. Protocol and service statistics are available in debug builds of ",Object(l.b)("inlineCode",{parentName:"p"},"libzt"),". These statistics are detailed fully in the section of ",Object(l.b)("inlineCode",{parentName:"p"},"include/ZeroTierSockets.h")," that is guarded by ",Object(l.b)("inlineCode",{parentName:"p"},"LWIP_STATS"),"."),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-c"},'struct zts_stats_proto stats;\nif (zts_get_protocol_stats(ZTS_STATS_PROTOCOL_ICMP, &stats) == ZTS_ERR_OK) {\n    printf("icmp.recv=%d\\n", stats.recv); // Count of received pings\n}\nif (zts_get_protocol_stats(ZTS_STATS_PROTOCOL_TCP, &stats) == ZTS_ERR_OK) {\n    printf("tcp.drop=%d\\n", stats.drop); // Count of dropped TCP packets\n}\n')),Object(l.b)("p",null,"4) There are a series of additional events which can signal whether the network stack or its virtual network interfaces have been set up properly. See ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_STACK_*")," and ",Object(l.b)("inlineCode",{parentName:"p"},"ZTS_EVENT_NETIF_*"),"."),Object(l.b)("h1",{id:"api-design-philosophy"},"API Design Philosophy"),Object(l.b)("p",null,"ZeroTier is written in C++ but exposes two C APIs at different abstraction levels for different purposes. First, there is the Core API which allows you to control a raw node that can securely move Ethernet frames. The core API is for those who need transport options below the socket layer. Second, there is a Socket API (this document). The socket API provides a familiar socket interface and a suite of convenient control functions. This API is recommended for most applications."),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"To authorize, use this code:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-ruby"},"require 'kittn'\n\napi = Kittn::APIClient.authorize!('meowmeowmeow')\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-python"},"import kittn\n\napi = kittn.authorize('meowmeowmeow')\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-shell"},'# With shell, you can just pass the correct header with each request\ncurl "api_endpoint_here" \\\n  -H "Authorization: meowmeowmeow"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-javascript"},"const kittn = require('kittn');\n\nlet api = kittn.authorize('meowmeowmeow');\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"Make sure to replace ",Object(l.b)("inlineCode",{parentName:"p"},"meowmeowmeow")," with your API key.")),Object(l.b)("p",null,"Kittn uses API keys to allow access to the API. You can register a new Kittn API key at our ",Object(l.b)("a",{parentName:"p",href:"http://example.com/developers"},"developer portal"),"."),Object(l.b)("p",null,"Kittn expects for the API key to be included in all API requests to the server in a header that looks like the following:"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"Authorization: meowmeowmeow")),Object(l.b)("aside",{class:"notice"},"You must replace ",Object(l.b)("code",null,"meowmeowmeow")," with your personal API key."),Object(l.b)("h1",{id:"kittens"},"Kittens"),Object(l.b)("h2",{id:"get-all-kittens"},"Get All Kittens"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-ruby"},"require 'kittn'\n\napi = Kittn::APIClient.authorize!('meowmeowmeow')\napi.kittens.get\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-python"},"import kittn\n\napi = kittn.authorize('meowmeowmeow')\napi.kittens.get()\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-shell"},'curl "http://example.com/api/kittens" \\\n  -H "Authorization: meowmeowmeow"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-javascript"},"const kittn = require('kittn');\n\nlet api = kittn.authorize('meowmeowmeow');\nlet kittens = api.kittens.get();\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"The above command returns JSON structured like this:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'[\n  {\n    "id": 1,\n    "name": "Fluffums",\n    "breed": "calico",\n    "fluffiness": 6,\n    "cuteness": 7\n  },\n  {\n    "id": 2,\n    "name": "Max",\n    "breed": "unknown",\n    "fluffiness": 5,\n    "cuteness": 10\n  }\n]\n')),Object(l.b)("p",null,"This endpoint retrieves all kittens."),Object(l.b)("h3",{id:"http-request"},"HTTP Request"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"GET http://example.com/api/kittens")),Object(l.b)("h3",{id:"query-parameters"},"Query Parameters"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Parameter"),Object(l.b)("th",{parentName:"tr",align:null},"Default"),Object(l.b)("th",{parentName:"tr",align:null},"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"include_cats"),Object(l.b)("td",{parentName:"tr",align:null},"false"),Object(l.b)("td",{parentName:"tr",align:null},"If set to true, the result will also include cats.")),Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"available"),Object(l.b)("td",{parentName:"tr",align:null},"true"),Object(l.b)("td",{parentName:"tr",align:null},"If set to false, the result will include kittens that have already been adopted.")))),Object(l.b)("aside",{class:"success"},"Remember \u2014 a happy kitten is an authenticated kitten!"),Object(l.b)("h2",{id:"get-a-specific-kitten"},"Get a Specific Kitten"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-ruby"},"require 'kittn'\n\napi = Kittn::APIClient.authorize!('meowmeowmeow')\napi.kittens.get(2)\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-python"},"import kittn\n\napi = kittn.authorize('meowmeowmeow')\napi.kittens.get(2)\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-shell"},'curl "http://example.com/api/kittens/2" \\\n  -H "Authorization: meowmeowmeow"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-javascript"},"const kittn = require('kittn');\n\nlet api = kittn.authorize('meowmeowmeow');\nlet max = api.kittens.get(2);\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"The above command returns JSON structured like this:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "id": 2,\n  "name": "Max",\n  "breed": "unknown",\n  "fluffiness": 5,\n  "cuteness": 10\n}\n')),Object(l.b)("p",null,"This endpoint retrieves a specific kitten."),Object(l.b)("aside",{class:"warning"},"Inside HTML code blocks like this one, you can't use Markdown, so use ",Object(l.b)("code",null,"<code>")," blocks to denote code."),Object(l.b)("h3",{id:"http-request-1"},"HTTP Request"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"GET http://example.com/kittens/<ID>")),Object(l.b)("h3",{id:"url-parameters"},"URL Parameters"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Parameter"),Object(l.b)("th",{parentName:"tr",align:null},"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"ID"),Object(l.b)("td",{parentName:"tr",align:null},"The ID of the kitten to retrieve")))),Object(l.b)("h2",{id:"delete-a-specific-kitten"},"Delete a Specific Kitten"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-ruby"},"require 'kittn'\n\napi = Kittn::APIClient.authorize!('meowmeowmeow')\napi.kittens.delete(2)\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-python"},"import kittn\n\napi = kittn.authorize('meowmeowmeow')\napi.kittens.delete(2)\n")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-shell"},'curl "http://example.com/api/kittens/2" \\\n  -X DELETE \\\n  -H "Authorization: meowmeowmeow"\n')),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-javascript"},"const kittn = require('kittn');\n\nlet api = kittn.authorize('meowmeowmeow');\nlet max = api.kittens.delete(2);\n")),Object(l.b)("blockquote",null,Object(l.b)("p",{parentName:"blockquote"},"The above command returns JSON structured like this:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-json"},'{\n  "id": 2,\n  "deleted" : ":("\n}\n')),Object(l.b)("p",null,"This endpoint deletes a specific kitten."),Object(l.b)("h3",{id:"http-request-2"},"HTTP Request"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"DELETE http://example.com/kittens/<ID>")),Object(l.b)("h3",{id:"url-parameters-1"},"URL Parameters"),Object(l.b)("table",null,Object(l.b)("thead",{parentName:"table"},Object(l.b)("tr",{parentName:"thead"},Object(l.b)("th",{parentName:"tr",align:null},"Parameter"),Object(l.b)("th",{parentName:"tr",align:null},"Description"))),Object(l.b)("tbody",{parentName:"table"},Object(l.b)("tr",{parentName:"tbody"},Object(l.b)("td",{parentName:"tr",align:null},"ID"),Object(l.b)("td",{parentName:"tr",align:null},"The ID of the kitten to delete")))))}N.isMDXComponent=!0},156:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var a=n(0),i=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=i.a.createContext({}),b=function(e){var t=i.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=b(e.components);return i.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return i.a.createElement(i.a.Fragment,{},t)}},u=i.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=b(n),u=a,m=d["".concat(r,".").concat(u)]||d[u]||p[u]||o;return n?i.a.createElement(m,l(l({ref:t},c),{},{components:n})):i.a.createElement(m,l({ref:t},c))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,r[1]=l;for(var c=2;c<o;c++)r[c]=n[c];return i.a.createElement.apply(null,r)}return i.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},158:function(e,t,n){"use strict";function a(e){var t,n,i="";if("string"==typeof e||"number"==typeof e)i+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(i&&(i+=" "),i+=n);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}t.a=function(){for(var e,t,n=0,i="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(i&&(i+=" "),i+=t);return i}},208:function(e,t,n){"use strict";var a=n(0),i=n(209);t.a=function(){const e=Object(a.useContext)(i.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},209:function(e,t,n){"use strict";var a=n(0);const i=Object(a.createContext)(void 0);t.a=i}}]);